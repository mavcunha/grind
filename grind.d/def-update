# vim: ft=zsh

SUBCOMMAND_DESC="Updates definitions directory if is a git repository"
SUBCOMMAND_HELP=$(cat <<EOH
Usage ${MAIN_COMMAND} ${SUBCOMMAND} [-h|--help]

Will run a "git pull --ff-only" on GRIND_DEF_DIR only if
GRIND_DEF_DIR != ROOT_DIR/definitions which means it
only will act if your definitions directory is an
external directory to grind's directory.

-h|--help             Show this message

EOH
)

case ${1} in
  noop) ;;
  -h|--help) _help ;;
  *)
    log "defs update GRIND_DEF_DIR=${GRIND_DEF_DIR} ROOT_DIR=${ROOT_DIR}"
    if [[ "${GRIND_DEF_DIR}" != "${ROOT_DIR}/definitions" ]]; then
      log "cd into ${GRIND_DEF_DIR}"
      cd ${GRIND_DEF_DIR}
      log "calling git pull --ff-only"
      in_cyan "Updating ${GRIND_DEF_DIR}...\n"
      git pull --ff-only
    else
      warn "Definitions directory is the same as grind's directory.\n"
    fi
  ;;
esac
